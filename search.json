[
  {
    "objectID": "CodelistGenerator/index.html#standarisation-of-the-data-format",
    "href": "CodelistGenerator/index.html#standarisation-of-the-data-format",
    "title": "CodelistGenerator",
    "section": "Standarisation of the data format",
    "text": "Standarisation of the data format\n\nThe OMOP Common Data Model"
  },
  {
    "objectID": "CodelistGenerator/index.html#create-a-reference-to-gibleed-dataset",
    "href": "CodelistGenerator/index.html#create-a-reference-to-gibleed-dataset",
    "title": "CodelistGenerator",
    "section": "Create a reference to GiBleed dataset",
    "text": "Create a reference to GiBleed dataset\n\nEunomia is a synthetic OMOP database with ~2,600 individuals. It is freely available and you can create a cdm reference like:\n\n\n\nlibrary(DBI)\nlibrary(dplyr)\nlibrary(duckdb)\nlibrary(omopgenerics)\nlibrary(CDMConnector)\nlibrary(here)\n\n\n\n\ndatasetName &lt;- \"GiBleed\"\nrequireEunomia(datasetName = datasetName)\ncon &lt;- dbConnect(duckdb(), dbdir = eunomiaDir(datasetName = datasetName))\ncdm &lt;- cdmFromCon(con = con, cdmSchema = \"main\", writeSchema = \"main\", cdmName = datasetName)\ncdm\n\n\n\n\n── # OMOP CDM reference (duckdb) of GiBleed ────────────────────────────────────────────────────────────────────────────\n\n\n• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,\nprocedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship,\nlocation, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source,\nconcept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor,\nsource_to_concept_map, drug_strength\n\n\n• cohort tables: -\n\n\n• achilles tables: -\n\n\n• other tables: -"
  },
  {
    "objectID": "CodelistGenerator/index.html#creating-a-reference-to-the-omop-common-data-model",
    "href": "CodelistGenerator/index.html#creating-a-reference-to-the-omop-common-data-model",
    "title": "CodelistGenerator",
    "section": "Creating a reference to the OMOP common data model",
    "text": "Creating a reference to the OMOP common data model\nOnce we have created the our reference to the overall OMOP CDM, we can reference specific tables using the “$” operator or [[““]].\n\ncdm$observation_period |&gt; head(2)\n\n# Source:   SQL [?? x 5]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n  observation_period_id person_id observation_period_start_date observation_period_end_date period_type_concept_id\n                  &lt;int&gt;     &lt;int&gt; &lt;date&gt;                        &lt;date&gt;                                       &lt;int&gt;\n1                     6         6 1963-12-31                    2007-02-06                                44814724\n2                    13        13 2009-04-26                    2019-04-14                                44814724\n\n\n\n\n\ncdm[[\"observation_period\"]] |&gt; head(2)\n\n# Source:   SQL [?? x 5]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n  observation_period_id person_id observation_period_start_date observation_period_end_date period_type_concept_id\n                  &lt;int&gt;     &lt;int&gt; &lt;date&gt;                        &lt;date&gt;                                       &lt;int&gt;\n1                     6         6 1963-12-31                    2007-02-06                                44814724\n2                    13        13 2009-04-26                    2019-04-14                                44814724"
  },
  {
    "objectID": "CodelistGenerator/index.html#behind-the-scenes",
    "href": "CodelistGenerator/index.html#behind-the-scenes",
    "title": "CodelistGenerator",
    "section": "Behind the scenes",
    "text": "Behind the scenes\nThe omopgenerics package defines core classes and methods used by CDMConnector and analytic packages.\n\nHaving omopgenerics as a central dependency reduces code duplication and ensures consistency across packages (eg function inputs, error messages, and results objects).\n\n\n\nomopgenerics::validateCdmArgument(cdm = cdm, \n                                  checkOverlapObservation = TRUE, \n                                  checkStartBeforeEndObservation = TRUE, \n                                  checkPlausibleObservationDates = TRUE)"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm_reference-object",
    "href": "CodelistGenerator/index.html#cdm_reference-object",
    "title": "CodelistGenerator",
    "section": "\n<cdm_reference> object",
    "text": "&lt;cdm_reference&gt; object\n\nclass(cdm)\n\n[1] \"cdm_reference\"\n\n\n\n\ncdmName(cdm)\n\n[1] \"GiBleed\"\n\n\n\n\n\ncdmVersion(cdm)\n\n[1] \"5.3\"\n\n\n\n\n\ncdmSource(cdm)\n\nThis is a duckdb cdm source"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm_table-object",
    "href": "CodelistGenerator/index.html#cdm_table-object",
    "title": "CodelistGenerator",
    "section": "\n<cdm_table> object",
    "text": "&lt;cdm_table&gt; object\n\n\ncdm$person\n\n# Source:   table&lt;person&gt; [?? x 18]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n   person_id gender_concept_id year_of_birth month_of_birth day_of_birth birth_datetime      race_concept_id\n       &lt;int&gt;             &lt;int&gt;         &lt;int&gt;          &lt;int&gt;        &lt;int&gt; &lt;dttm&gt;                        &lt;int&gt;\n 1         6              8532          1963             12           31 1963-12-31 00:00:00            8516\n 2       123              8507          1950              4           12 1950-04-12 00:00:00            8527\n 3       129              8507          1974             10            7 1974-10-07 00:00:00            8527\n 4        16              8532          1971             10           13 1971-10-13 00:00:00            8527\n 5        65              8532          1967              3           31 1967-03-31 00:00:00            8516\n 6        74              8532          1972              1            5 1972-01-05 00:00:00            8527\n 7        42              8532          1909             11            2 1909-11-02 00:00:00            8527\n 8       187              8507          1945              7           23 1945-07-23 00:00:00            8527\n 9        18              8532          1965             11           17 1965-11-17 00:00:00            8527\n10       111              8532          1975              5            2 1975-05-02 00:00:00            8527\n# ℹ more rows\n# ℹ 11 more variables: ethnicity_concept_id &lt;int&gt;, location_id &lt;int&gt;, provider_id &lt;int&gt;, care_site_id &lt;int&gt;,\n#   person_source_value &lt;chr&gt;, gender_source_value &lt;chr&gt;, gender_source_concept_id &lt;int&gt;, race_source_value &lt;chr&gt;,\n#   race_source_concept_id &lt;int&gt;, ethnicity_source_value &lt;chr&gt;, ethnicity_source_concept_id &lt;int&gt;\n\n\n\n\n\nclass(cdm$person)\n\n[1] \"omop_table\"            \"cdm_table\"             \"tbl_duckdb_connection\" \"tbl_dbi\"              \n[5] \"tbl_sql\"               \"tbl_lazy\"              \"tbl\""
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm_table-object-1",
    "href": "CodelistGenerator/index.html#cdm_table-object-1",
    "title": "CodelistGenerator",
    "section": "\n<cdm_table> object",
    "text": "&lt;cdm_table&gt; object\n\n\ncdmReference(cdm$person)\n\n\n\n\n── # OMOP CDM reference (duckdb) of GiBleed ────────────────────────────────────────────────────────────────────────────\n\n\n• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,\nprocedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship,\nlocation, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source,\nconcept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor,\nsource_to_concept_map, drug_strength\n\n\n• cohort tables: -\n\n\n• achilles tables: -\n\n\n• other tables: -\n\n\n\n\n\ntableName(cdm$person)\n\n[1] \"person\"\n\n\n\n\n\ntableSource(cdm$person)\n\nThis is a duckdb cdm source"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm_table-object-2",
    "href": "CodelistGenerator/index.html#cdm_table-object-2",
    "title": "CodelistGenerator",
    "section": "\n<cdm_table> object",
    "text": "&lt;cdm_table&gt; object\n\ncdmName(cdm$person)\n\n[1] \"GiBleed\"\n\n\n\n\ncdmVersion(cdm$person)\n\n[1] \"5.3\"\n\n\n\n\n\ncdmSource(cdm$person)\n\nThis is a duckdb cdm source"
  },
  {
    "objectID": "CodelistGenerator/index.html#working-with-the-cdm-reference",
    "href": "CodelistGenerator/index.html#working-with-the-cdm-reference",
    "title": "CodelistGenerator",
    "section": "Working with the cdm reference",
    "text": "Working with the cdm reference\nWe can use common dplyr operations to interact with the data in our cdm reference\n\ncdm$condition_occurrence |&gt; \n  count()\n\n# Source:   SQL [?? x 1]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n      n\n  &lt;dbl&gt;\n1 65332\n\n\n\n\n\ncdm$condition_occurrence |&gt; \n  summarise(\n    min_condition_start = min(condition_start_date, na.rm = TRUE),\n    median_condition_start = median(condition_start_date, na.rm = TRUE),\n    max_condition_start = max(condition_start_date, na.rm = TRUE))\n\n# Source:   SQL [?? x 3]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n  min_condition_start median_condition_start max_condition_start\n  &lt;date&gt;              &lt;dttm&gt;                 &lt;date&gt;             \n1 1908-10-30          1986-12-09 00:00:00    2019-06-29"
  },
  {
    "objectID": "CodelistGenerator/index.html#dplyr-r-code-to-sql",
    "href": "CodelistGenerator/index.html#dplyr-r-code-to-sql",
    "title": "CodelistGenerator",
    "section": "Dplyr R code to SQL",
    "text": "Dplyr R code to SQL\nBehind the scenes our dplyr query is being translated into SQL.\n\ncdm$condition_occurrence |&gt; \n  count() |&gt; \n  show_query()\n\n&lt;SQL&gt;\nSELECT COUNT(*) AS n\nFROM condition_occurrence\n\n\n\n\ncdm$condition_occurrence |&gt; \n  summarise(\n    min_condition_start = min(condition_start_date, na.rm = TRUE),\n    median_condition_start = median(condition_start_date, na.rm = TRUE),\n    max_condition_start = max(condition_start_date, na.rm = TRUE)) |&gt; \n  show_query()\n\n&lt;SQL&gt;\nSELECT\n  MIN(condition_start_date) AS min_condition_start,\n  MEDIAN(condition_start_date) AS median_condition_start,\n  MAX(condition_start_date) AS max_condition_start\nFROM condition_occurrence"
  },
  {
    "objectID": "CodelistGenerator/index.html#your-turn",
    "href": "CodelistGenerator/index.html#your-turn",
    "title": "CodelistGenerator",
    "section": "Your turn",
    "text": "Your turn\nUsing a cdm reference you have connected to:\n\nHow many people are in the person table?\nWhat is the minimum observation period start date?\nWhat is the maximum observation period end date?"
  },
  {
    "objectID": "CodelistGenerator/index.html#solution",
    "href": "CodelistGenerator/index.html#solution",
    "title": "CodelistGenerator",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\ncdm$person |&gt; \n  count()\n\n# Source:   SQL [?? x 1]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n      n\n  &lt;dbl&gt;\n1  2694\n\ncdm$observation_period |&gt; \n  summarise(min_obs_period_start = min(observation_period_start_date, na.rm = TRUE)) \n\n# Source:   SQL [?? x 1]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n  min_obs_period_start\n  &lt;date&gt;              \n1 1908-09-22          \n\ncdm$observation_period |&gt; \n  summarise(max_obs_period_start = max(observation_period_start_date, na.rm = TRUE))\n\n# Source:   SQL [?? x 1]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n  max_obs_period_start\n  &lt;date&gt;              \n1 2019-06-29"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm-vocabulary-tables-1",
    "href": "CodelistGenerator/index.html#cdm-vocabulary-tables-1",
    "title": "CodelistGenerator",
    "section": "CDM vocabulary tables",
    "text": "CDM vocabulary tables\nhttps://athena.ohdsi.org"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm-vocabulary-tables-2",
    "href": "CodelistGenerator/index.html#cdm-vocabulary-tables-2",
    "title": "CodelistGenerator",
    "section": "CDM vocabulary tables",
    "text": "CDM vocabulary tables\n\ncdm$concept |&gt; glimpse()\n\nRows: ??\nColumns: 10\nDatabase: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n$ concept_id       &lt;int&gt; 35208414, 1118088, 40213201, 1557272, 4336464, 4295880, 3020630, 19129655, 44923712, 1569708,…\n$ concept_name     &lt;chr&gt; \"Gastrointestinal hemorrhage, unspecified\", \"celecoxib 200 MG Oral Capsule [Celebrex]\", \"pneu…\n$ domain_id        &lt;chr&gt; \"Condition\", \"Drug\", \"Drug\", \"Drug\", \"Procedure\", \"Procedure\", \"Measurement\", \"Drug\", \"Drug\",…\n$ vocabulary_id    &lt;chr&gt; \"ICD10CM\", \"RxNorm\", \"CVX\", \"RxNorm\", \"SNOMED\", \"SNOMED\", \"LOINC\", \"RxNorm\", \"NDC\", \"ICD10CM\"…\n$ concept_class_id &lt;chr&gt; \"4-char billing code\", \"Branded Drug\", \"CVX\", \"Ingredient\", \"Procedure\", \"Procedure\", \"Lab Te…\n$ standard_concept &lt;chr&gt; NA, \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", NA, NA, \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", NA, \"S\", \"S\", \"S…\n$ concept_code     &lt;chr&gt; \"K92.2\", \"213469\", \"33\", \"46041\", \"232717009\", \"76601001\", \"2885-2\", \"789980\", \"00025152531\",…\n$ valid_start_date &lt;date&gt; 2007-01-01, 1970-01-01, 2008-12-01, 1970-01-01, 1970-01-01, 1970-01-01, 1970-01-01, 2008-03-…\n$ valid_end_date   &lt;date&gt; 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-…\n$ invalid_reason   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm-vocabulary-tables-3",
    "href": "CodelistGenerator/index.html#cdm-vocabulary-tables-3",
    "title": "CodelistGenerator",
    "section": "CDM vocabulary tables",
    "text": "CDM vocabulary tables\n\ncdm$condition_occurrence |&gt;\n  group_by(condition_concept_id) |&gt;\n  tally() |&gt;\n  left_join(\n    cdm$concept |&gt;\n      select(\"concept_id\", \"concept_name\"),\n    by = c(\"condition_concept_id\" = \"concept_id\")\n  ) |&gt;\n  collect() |&gt;\n  arrange(desc(n))\n\n# A tibble: 80 × 3\n   condition_concept_id     n concept_name                            \n                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                                   \n 1             40481087 17268 Viral sinusitis                         \n 2              4112343 10217 Acute viral pharyngitis                 \n 3               260139  8184 Acute bronchitis                        \n 4               372328  3605 Otitis media                            \n 5                80180  2694 Osteoarthritis                          \n 6                28060  2656 Streptococcal sore throat               \n 7                81151  1915 Sprain of ankle                         \n 8               378001  1013 Concussion with no loss of consciousness\n 9              4283893  1001 Sinusitis                               \n10              4294548   939 Acute bacterial sinusitis               \n# ℹ 70 more rows"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm-vocabulary-tables-4",
    "href": "CodelistGenerator/index.html#cdm-vocabulary-tables-4",
    "title": "CodelistGenerator",
    "section": "CDM vocabulary tables",
    "text": "CDM vocabulary tables\n\ncdm$concept_ancestor |&gt; glimpse()\n\nRows: ??\nColumns: 4\nDatabase: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n$ ancestor_concept_id      &lt;int&gt; 4180628, 4179141, 21500574, 21505770, 21503967, 36203060, 36151386, 21502552, 4076562…\n$ descendant_concept_id    &lt;int&gt; 313217, 4146173, 1118084, 1119510, 40162522, 40479422, 1119510, 1112807, 40769189, 19…\n$ min_levels_of_separation &lt;int&gt; 5, 2, 4, 0, 5, 4, 0, 4, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 2, 0, 0, 2, 0, 0, 0…\n$ max_levels_of_separation &lt;int&gt; 6, 2, 4, 0, 6, 4, 0, 4, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 3, 3, 0, 0, 3, 0, 0, 0…"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm-vocabulary-tables-5",
    "href": "CodelistGenerator/index.html#cdm-vocabulary-tables-5",
    "title": "CodelistGenerator",
    "section": "CDM vocabulary tables",
    "text": "CDM vocabulary tables\n\ncdm$concept_relationship |&gt; glimpse()\n\nRows: ??\nColumns: 6\nDatabase: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n$ concept_id_1     &lt;int&gt; 192671, 1118088, 1569708, 35208414, 35208414, 40162359, 44923712, 45011828\n$ concept_id_2     &lt;int&gt; 35208414, 44923712, 35208414, 192671, 1569708, 45011828, 1118088, 40162359\n$ relationship_id  &lt;chr&gt; \"Mapped from\", \"Mapped from\", \"Subsumes\", \"Maps to\", \"Is a\", \"Mapped from\", \"Maps to\", \"Maps …\n$ valid_start_date &lt;date&gt; 1970-01-01, 1970-01-01, 2016-03-25, 1970-01-01, 2016-03-25, 2009-08-03, 1970-01-01, 2009-08-0…\n$ valid_end_date   &lt;date&gt; 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-31, 2099-12-3…\n$ invalid_reason   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA"
  },
  {
    "objectID": "CodelistGenerator/index.html#cdm-vocabulary-tables-6",
    "href": "CodelistGenerator/index.html#cdm-vocabulary-tables-6",
    "title": "CodelistGenerator",
    "section": "CDM vocabulary tables",
    "text": "CDM vocabulary tables\n\ncdm$concept_synonym |&gt; glimpse()\n\nRows: ??\nColumns: 3\nDatabase: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n$ concept_id           &lt;int&gt; 964261, 1322184, 441267, 1718412, 4336464, 4102123, 4237458, 4280726, 4330583, 3014576, 4…\n$ concept_synonym_name &lt;chr&gt; \"cyanocobalamin 5000 MCG/ML Injectable Solution\", \"clopidogrel\", \"Cystic fibrosis (disord…\n$ language_concept_id  &lt;int&gt; 4180186, 4180186, 4180186, 4180186, 4180186, 4180186, 4180186, 4180186, 4180186, 4180186,…"
  },
  {
    "objectID": "CodelistGenerator/index.html#vocabulary-version",
    "href": "CodelistGenerator/index.html#vocabulary-version",
    "title": "CodelistGenerator",
    "section": "Vocabulary version",
    "text": "Vocabulary version\nSearch results will be specific to the version of the vocabulary being used\n\nlibrary(CodelistGenerator)\ngetVocabVersion(cdm = cdm)\n\n[1] \"v5.0 18-JAN-19\""
  },
  {
    "objectID": "CodelistGenerator/index.html#available-vocabularies",
    "href": "CodelistGenerator/index.html#available-vocabularies",
    "title": "CodelistGenerator",
    "section": "Available vocabularies",
    "text": "Available vocabularies\nWhat vocabularies are available?\n\ngetVocabularies(cdm = cdm)\n\n[1] \"CVX\"     \"Gender\"  \"ICD10CM\" \"LOINC\"   \"NDC\"     \"None\"    \"RxNorm\"  \"SNOMED\"  \"Visit\""
  },
  {
    "objectID": "CodelistGenerator/index.html#available-domains",
    "href": "CodelistGenerator/index.html#available-domains",
    "title": "CodelistGenerator",
    "section": "Available domains",
    "text": "Available domains\nWhat domains are present?\n\ngetDomains(cdm = cdm)\n\n[1] \"Measurement\" \"Drug\"        \"Procedure\"   \"Condition\"   \"Observation\" \"Visit\"       \"Gender\""
  },
  {
    "objectID": "CodelistGenerator/index.html#concept-classes",
    "href": "CodelistGenerator/index.html#concept-classes",
    "title": "CodelistGenerator",
    "section": "Concept classes",
    "text": "Concept classes\nWhat concept classes are present?\n\ngetConceptClassId(\n  cdm = cdm,\n  standardConcept = \"Standard\",\n  domain = \"Drug\"\n)\n\n[1] \"Branded Drug\"        \"Branded Drug Comp\"   \"Branded Pack\"        \"Clinical Drug\"       \"Clinical Drug Comp\" \n[6] \"CVX\"                 \"Ingredient\"          \"Quant Branded Drug\"  \"Quant Clinical Drug\"\n\n\n\n\ngetConceptClassId(\n  cdm = cdm,\n  standardConcept = \"Standard\",\n  domain = \"Condition\"\n)\n\n[1] \"Clinical Finding\""
  },
  {
    "objectID": "CodelistGenerator/index.html#your-turn-1",
    "href": "CodelistGenerator/index.html#your-turn-1",
    "title": "CodelistGenerator",
    "section": "Your turn",
    "text": "Your turn\nUsing a cdm reference you have connected to:\n\nWhat is the vocabulary version of the cdm?\nHow many concepts are in your concept table?\nWhat domains are available?"
  },
  {
    "objectID": "CodelistGenerator/index.html#solution-1",
    "href": "CodelistGenerator/index.html#solution-1",
    "title": "CodelistGenerator",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\ngetVocabVersion(cdm = cdm)\n\n[1] \"v5.0 18-JAN-19\"\n\ncdm$concept |&gt;\n  tally()\n\n# Source:   SQL [?? x 1]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n      n\n  &lt;dbl&gt;\n1   444\n\ngetDomains(cdm = cdm)\n\n[1] \"Drug\"        \"Measurement\" \"Observation\" \"Visit\"       \"Gender\"      \"Procedure\"   \"Condition\""
  },
  {
    "objectID": "CodelistGenerator/index.html#vocabulary-based-codelists-using-codelistgenerator-1",
    "href": "CodelistGenerator/index.html#vocabulary-based-codelists-using-codelistgenerator-1",
    "title": "CodelistGenerator",
    "section": "Vocabulary-based codelists using CodelistGenerator",
    "text": "Vocabulary-based codelists using CodelistGenerator\nWe can use drug hierarchies and relationships to create vocabulary-based codelists."
  },
  {
    "objectID": "CodelistGenerator/index.html#drug-ingredients",
    "href": "CodelistGenerator/index.html#drug-ingredients",
    "title": "CodelistGenerator",
    "section": "Drug ingredients",
    "text": "Drug ingredients\n\ningredients &lt;- getDrugIngredientCodes(cdm = cdm, \n                                      name = c(\"warfarin\", \"morphine\", \n                                               \"verapamil\", \"atorvastatin\",\n                                               \"nitroglycerin\", \"simvastatin\",\n                                               \"acetaminophen\"),\n                                      nameStyle = \"{concept_name}\")\ningredients\n\n\n- acetaminophen (7 codes)\n- atorvastatin (2 codes)\n- morphine (2 codes)\n- nitroglycerin (2 codes)\n- simvastatin (2 codes)\n- verapamil (2 codes)\nalong with 1 more codelists\n\n\n\n\ningredients$warfarin\n\n[1]  1310149 40163554\n\n\n\n\n\ncdm$concept |&gt;\n  filter(concept_id %in% c(1310149, 40163554))\n\n# Source:   SQL [?? x 10]\n# Database: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n  concept_id concept_name        domain_id vocabulary_id concept_class_id standard_concept concept_code valid_start_date\n       &lt;int&gt; &lt;chr&gt;               &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;        &lt;date&gt;          \n1    1310149 Warfarin            Drug      RxNorm        Ingredient       S                11289        1970-01-01      \n2   40163554 Warfarin Sodium 5 … Drug      RxNorm        Clinical Drug    S                855332       2009-08-02      \n# ℹ 2 more variables: valid_end_date &lt;date&gt;, invalid_reason &lt;chr&gt;"
  },
  {
    "objectID": "CodelistGenerator/index.html#drug-ingredients-1",
    "href": "CodelistGenerator/index.html#drug-ingredients-1",
    "title": "CodelistGenerator",
    "section": "Drug ingredients",
    "text": "Drug ingredients\n\ncombinations &lt;- getDrugIngredientCodes(cdm = cdm, \n                                      name = c(\"acetaminophen\"),\n                                      ingredientRange = c(2, Inf),\n                                      nameStyle = \"{concept_name}\")\ncombinations\n\n\n- acetaminophen (4 codes)\n\n\n\n\ncombinations$acetaminophen\n\n[1] 40229134 40231925 40162522 19133768\n\n\n\n\n\ncdm$concept |&gt;\n  filter(concept_id %in% c(40229134, 40231925, 40162522, 19133768)) |&gt; \n  pull(concept_name)\n\n[1] \"Acetaminophen 21.7 MG/ML / Dextromethorphan Hydrobromide 1 MG/ML / doxylamine succinate 0.417 MG/ML Oral Solution\"\n[2] \"Acetaminophen 325 MG / Oxycodone Hydrochloride 5 MG Oral Tablet\"                                                  \n[3] \"Acetaminophen 325 MG / Hydrocodone Bitartrate 7.5 MG Oral Tablet\"                                                 \n[4] \"Acetaminophen 750 MG / Hydrocodone Bitartrate 7.5 MG Oral Tablet\""
  },
  {
    "objectID": "CodelistGenerator/index.html#your-turn-2",
    "href": "CodelistGenerator/index.html#your-turn-2",
    "title": "CodelistGenerator",
    "section": "Your turn",
    "text": "Your turn\nUsing Eunomia data:\n\nGet codes for memantine using getDrugIngredientCodes. How many codes do you include?\nGet codes for memantine, restricting to only concepts with it as the only ingredient. Do the codes you include change?"
  },
  {
    "objectID": "CodelistGenerator/index.html#solution-2",
    "href": "CodelistGenerator/index.html#solution-2",
    "title": "CodelistGenerator",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\nmemantine_codes &lt;- getDrugIngredientCodes(cdm = cdm, name = \"memantine\")\nmemantine_codes\n\n\n- 6719_memantine (3 codes)\n\n\n\nmemantine_monotherapy_codes &lt;- getDrugIngredientCodes(cdm = cdm, name = \"memantine\",\n                                                      ingredientRange = c(1, 1))\nmemantine_monotherapy_codes\n\n\n- 6719_memantine (2 codes)"
  },
  {
    "objectID": "CodelistGenerator/index.html#systematic-search-using-codelistgenerator-1",
    "href": "CodelistGenerator/index.html#systematic-search-using-codelistgenerator-1",
    "title": "CodelistGenerator",
    "section": "Systematic search using CodelistGenerator",
    "text": "Systematic search using CodelistGenerator\n\nCodelistGenerator is used to create a candidate set of codes for helping to define patient cohorts in data mapped to the OMOP common data model.\n\n\nA little like the process for a systematic review, the idea is that for a specified search strategy, CodelistGenerator will identify a set of concepts that may be relevant, with these then being screened to remove any irrelevant codes."
  },
  {
    "objectID": "CodelistGenerator/index.html#codes-for-asthma",
    "href": "CodelistGenerator/index.html#codes-for-asthma",
    "title": "CodelistGenerator",
    "section": "Codes for asthma",
    "text": "Codes for asthma\n\nasthma_codes &lt;- getCandidateCodes(\n  cdm = cdm,\n  keywords = \"asthma\",\n  domains = \"Condition\"\n)\nasthma_codes |&gt; glimpse()\n\nRows: 2\nColumns: 6\n$ concept_id       &lt;int&gt; 4051466, 317009\n$ found_from       &lt;chr&gt; \"From initial search\", \"From initial search\"\n$ concept_name     &lt;chr&gt; \"Childhood asthma\", \"Asthma\"\n$ domain_id        &lt;chr&gt; \"Condition\", \"Condition\"\n$ vocabulary_id    &lt;chr&gt; \"SNOMED\", \"SNOMED\"\n$ standard_concept &lt;chr&gt; \"S\", \"S\"\n\n\n\n\n\nasthma_cs &lt;- newCodelist(list(\"asthma\" = asthma_codes$concept_id))\nasthma_cs\n\n\n- asthma (2 codes)"
  },
  {
    "objectID": "CodelistGenerator/index.html#your-turn-3",
    "href": "CodelistGenerator/index.html#your-turn-3",
    "title": "CodelistGenerator",
    "section": "Your turn",
    "text": "Your turn\nUsing Eunomia data:\n\nSearch for codes for sinusitis recorded in the condition domain\nDo you identify any more codes if you also search in the observation domain as well as the condition domain"
  },
  {
    "objectID": "CodelistGenerator/index.html#solution-3",
    "href": "CodelistGenerator/index.html#solution-3",
    "title": "CodelistGenerator",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\nsinusitis_codes &lt;- getCandidateCodes(\n  cdm = cdm,\n  keywords = \"sinusitis\",\n  domains = \"Condition\"\n)\nnrow(sinusitis_codes)\n\n[1] 4\n\nsinusitis_codes_2 &lt;- getCandidateCodes(\n  cdm = cdm,\n  keywords = \"sinusitis\",\n  domains = c(\"Condition\", \"Observation\")\n)\nnrow(sinusitis_codes_2)\n\n[1] 4"
  },
  {
    "objectID": "CodelistGenerator/index.html#codelists-to-cohorts-1",
    "href": "CodelistGenerator/index.html#codelists-to-cohorts-1",
    "title": "CodelistGenerator",
    "section": "Codelists to cohorts",
    "text": "Codelists to cohorts\n\nlibrary(CohortConstructor)\nmedication_codes &lt;- getDrugIngredientCodes(cdm = cdm, \n                                      name = c(\"warfarin\", \"morphine\", \n                                               \"verapamil\", \"atorvastatin\",\n                                               \"nitroglycerin\", \"simvastatin\",\n                                               \"acetaminophen\"),\n                                      nameStyle = \"{concept_name}\")\n\nsinusitis_codes &lt;- getCandidateCodes(\n  cdm = cdm,\n  keywords = \"sinusitis\",\n  domains = \"Condition\"\n)\n\nstudy_codelists &lt;- bind(medication_codes,\n     list(sinusitis = sinusitis_codes$concept_id))\n\ncdm$study_cohort &lt;- conceptCohort(cdm = cdm, \n                                       conceptSet = study_codelists,\n                                       exit = \"event_end_date\",\n                                       name = \"study_cohort\")\n\ncdm$study_cohort |&gt; \n  glimpse()\n\nRows: ??\nColumns: 4\nDatabase: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n$ cohort_definition_id &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ subject_id           &lt;int&gt; 19, 19, 102, 140, 149, 318, 318, 369, 412, 580, 959, 1144, 1321, 1486, 1508, 1558, 1565, …\n$ cohort_start_date    &lt;date&gt; 1977-09-01, 2007-04-21, 1974-01-16, 1995-01-07, 1947-01-21, 1962-04-08, 1974-03-07, 1990…\n$ cohort_end_date      &lt;date&gt; 1977-09-08, 2007-04-28, 1974-01-30, 1995-01-28, 1947-01-28, 1962-04-29, 1974-03-21, 1990…"
  },
  {
    "objectID": "CodelistGenerator/index.html#cohort_table-object",
    "href": "CodelistGenerator/index.html#cohort_table-object",
    "title": "CodelistGenerator",
    "section": "\n<cohort_table> object",
    "text": "&lt;cohort_table&gt; object\n\nsettings(cdm$study_cohort)\n\n# A tibble: 8 × 4\n  cohort_definition_id cohort_name   cdm_version vocabulary_version\n                 &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;             \n1                    1 acetaminophen 5.3         v5.0 18-JAN-19    \n2                    2 atorvastatin  5.3         v5.0 18-JAN-19    \n3                    3 morphine      5.3         v5.0 18-JAN-19    \n4                    4 nitroglycerin 5.3         v5.0 18-JAN-19    \n5                    5 simvastatin   5.3         v5.0 18-JAN-19    \n6                    6 sinusitis     5.3         v5.0 18-JAN-19    \n7                    7 verapamil     5.3         v5.0 18-JAN-19    \n8                    8 warfarin      5.3         v5.0 18-JAN-19    \n\n\n\n\n\ncohortCount(cdm$study_cohort)\n\n# A tibble: 8 × 3\n  cohort_definition_id number_records number_subjects\n                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;\n1                    1          13908            2679\n2                    2             57              54\n3                    3             35              35\n4                    4            209             192\n5                    5            182             182\n6                    6          19147            2689\n7                    7            137             137\n8                    8            137             137"
  },
  {
    "objectID": "CodelistGenerator/index.html#cohort_table-object-1",
    "href": "CodelistGenerator/index.html#cohort_table-object-1",
    "title": "CodelistGenerator",
    "section": "\n<cohort_table> object",
    "text": "&lt;cohort_table&gt; object\n\nattrition(cdm$study_cohort)\n\n# A tibble: 48 × 7\n   cohort_definition_id number_records number_subjects reason_id reason               excluded_records excluded_subjects\n                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                           &lt;int&gt;             &lt;int&gt;\n 1                    1          14205            2679         1 Initial qualifying …                0                 0\n 2                    1          14205            2679         2 Record start &lt;= rec…                0                 0\n 3                    1          14205            2679         3 Record in observati…                0                 0\n 4                    1          14205            2679         4 Non-missing sex                     0                 0\n 5                    1          14205            2679         5 Non-missing year of…                0                 0\n 6                    1          13908            2679         6 Merge overlapping r…              297                 0\n 7                    2             57              54         1 Initial qualifying …                0                 0\n 8                    2             57              54         2 Record start &lt;= rec…                0                 0\n 9                    2             57              54         3 Record in observati…                0                 0\n10                    2             57              54         4 Non-missing sex                     0                 0\n# ℹ 38 more rows"
  },
  {
    "objectID": "CodelistGenerator/index.html#cohort_table-object-2",
    "href": "CodelistGenerator/index.html#cohort_table-object-2",
    "title": "CodelistGenerator",
    "section": "\n<cohort_table> object",
    "text": "&lt;cohort_table&gt; object\n\ncohortCodelist(cdm$study_cohort, 1)\n\n\n- acetaminophen (7 codes)"
  },
  {
    "objectID": "CodelistGenerator/index.html#your-turn-4",
    "href": "CodelistGenerator/index.html#your-turn-4",
    "title": "CodelistGenerator",
    "section": "Your turn",
    "text": "Your turn\nUsing Eunomia data:\n\nCreate a cohort of people taking aspirin"
  },
  {
    "objectID": "CodelistGenerator/index.html#solution-4",
    "href": "CodelistGenerator/index.html#solution-4",
    "title": "CodelistGenerator",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\naspirin_codes &lt;- getDrugIngredientCodes(cdm = cdm, name = \"aspirin\")\ncdm$aspirin_cohort &lt;- conceptCohort(cdm = cdm, conceptSet = aspirin_codes, \n                                    name = \"aspirin_cohort\")\n\ncdm$aspirin_cohort |&gt; \n  glimpse()\n\nRows: ??\nColumns: 4\nDatabase: DuckDB v1.3.1 [unknown@Linux 6.11.0-1015-azure:R 4.5.1//tmp/RtmpnTw4f6/file2a0439702a1b.duckdb]\n$ cohort_definition_id &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ subject_id           &lt;int&gt; 57, 90, 686, 1176, 1613, 1929, 2100, 2346, 2771, 3132, 3133, 3436, 3531, 3961, 4700, 4867…\n$ cohort_start_date    &lt;date&gt; 1982-12-31, 1975-11-10, 1948-01-30, 1967-08-24, 1958-01-07, 1955-02-23, 1944-08-01, 1946…\n$ cohort_end_date      &lt;date&gt; 1983-01-21, 1975-12-10, 1948-02-13, 1967-09-28, 1958-01-21, 1955-03-09, 1944-08-15, 1946…"
  },
  {
    "objectID": "CohortCharacteristics/index.html#cohortcharacteristics",
    "href": "CohortCharacteristics/index.html#cohortcharacteristics",
    "title": "CohortCharacteristics",
    "section": "CohortCharacteristics",
    "text": "CohortCharacteristics"
  },
  {
    "objectID": "CohortCharacteristics/index.html#context",
    "href": "CohortCharacteristics/index.html#context",
    "title": "CohortCharacteristics",
    "section": "Context",
    "text": "Context\n\nThis package aims to standardise and provide the tools to conduct Characterisation studies as of the Darwin-EU Catalogue of Standard Analytics."
  },
  {
    "objectID": "CohortCharacteristics/index.html#package-overview",
    "href": "CohortCharacteristics/index.html#package-overview",
    "title": "CohortCharacteristics",
    "section": "Package overview",
    "text": "Package overview\n\nv1.0.0 on cran\npackage website"
  },
  {
    "objectID": "CohortCharacteristics/index.html#functions",
    "href": "CohortCharacteristics/index.html#functions",
    "title": "CohortCharacteristics",
    "section": "Functions",
    "text": "Functions\n\nsummariseCohortCount\nsummariseCohortAttrition\nsummariseCharacteristics\nsummariseLargeScaleCharacteristics\nsummariseCohortOverlap\nsummariseCohortTiming"
  },
  {
    "objectID": "CohortCharacteristics/index.html#workflow",
    "href": "CohortCharacteristics/index.html#workflow",
    "title": "CohortCharacteristics",
    "section": "Workflow",
    "text": "Workflow\nWe have three types of functions:\n\nsummarise: these functions produce an standardised output to summarise a cohort. This standard output is called summarised_result.\nplot: these functions produce plots (currently, only ggplot, but working to implement plotly) from a summarised_result object.\ntable: these functions produce tables (gt and flextable) from a summarised_result object.\n\n\n\nresult &lt;- summariseXXX(...)\n\n\n\n\ntableXXX(result)\n\n\n\n\nplotXXX(result)\n\n\n\n\n\n\n\n\nflowchart LR\n  A[summarise function ] --&gt; B[Plot function ]\n  A --&gt; C[Table function ]"
  },
  {
    "objectID": "CohortCharacteristics/index.html#loadd-needed-packages",
    "href": "CohortCharacteristics/index.html#loadd-needed-packages",
    "title": "CohortCharacteristics",
    "section": "Loadd needed packages",
    "text": "Loadd needed packages\n\nlibrary(duckdb)\nlibrary(CDMConnector)\nlibrary(dplyr)\nlibrary(here)\nlibrary(CodelistGenerator)\nlibrary(CohortConstructor)\nlibrary(CohortCharacteristics)\nlibrary(PatientProfiles)\nlibrary(gt)\nlibrary(ggplot2)\nlibrary(dplyr, warn.conflicts = FALSE)\nlibrary(visOmopResults)\nlibrary(plotly)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#create-gibleed-cdm_reference-object",
    "href": "CohortCharacteristics/index.html#create-gibleed-cdm_reference-object",
    "title": "CohortCharacteristics",
    "section": "Create GiBleed cdm_reference object",
    "text": "Create GiBleed cdm_reference object\n\ndatasetName &lt;- \"GiBleed\"\nrequireEunomia(datasetName = datasetName)\ncon &lt;- dbConnect(drv = duckdb(dbdir = eunomiaDir(datasetName = datasetName)))\n\nCreating CDM database /home/runner/work/darwinTutorial2025/darwinTutorial2025/mock_datasets//GiBleed_5.3.zip\n\ncdm &lt;- cdmFromCon(con = con, cdmSchema = \"main\", writeSchema = \"main\", cdmName = datasetName)\ncdm\n\n\n── # OMOP CDM reference (duckdb) of GiBleed ────────────────────────────────────────────────────────────────────────────\n• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,\nprocedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship,\nlocation, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source,\nconcept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor,\nsource_to_concept_map, drug_strength\n• cohort tables: -\n• achilles tables: -\n• other tables: -"
  },
  {
    "objectID": "CohortCharacteristics/index.html#let-create-a-acetaminophen-cohort",
    "href": "CohortCharacteristics/index.html#let-create-a-acetaminophen-cohort",
    "title": "CohortCharacteristics",
    "section": "Let’ create a acetaminophen cohort",
    "text": "Let’ create a acetaminophen cohort\nLet’s create a cohort that is all records of acetaminophen with the following inclusion criteria:\n\nCollapse records separated by 30 days or less in the same episode.\nNo prior record of acetaminophen in the last 180 days.\nAt least 180 days of prior observation.\nIndex date between 1990 and 2019"
  },
  {
    "objectID": "CohortCharacteristics/index.html#let-create-a-acetaminophen-cohort-1",
    "href": "CohortCharacteristics/index.html#let-create-a-acetaminophen-cohort-1",
    "title": "CohortCharacteristics",
    "section": "Let’ create a acetaminophen cohort",
    "text": "Let’ create a acetaminophen cohort\n\n\ncodelist &lt;- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\", nameStyle = \"{concept_name}\")\ncdm$acetaminophen &lt;- conceptCohort(\n  cdm = cdm, \n  conceptSet = codelist, \n  name = \"acetaminophen\",\n  exit = \"event_end_date\"\n) |&gt;\n  collapseCohorts(gap = 30) |&gt;\n  requireCohortIntersect(\n    targetCohortTable = \"acetaminophen\", \n    window = c(-180, -1), \n    intersections = 0\n  ) |&gt;\n  requirePriorObservation(minPriorObservation = 180) |&gt;\n  requireInDateRange(dateRange = as.Date(c(\"1990-01-01\", \"2019-12-31\")))"
  },
  {
    "objectID": "CohortCharacteristics/index.html#summarisecohortattrition",
    "href": "CohortCharacteristics/index.html#summarisecohortattrition",
    "title": "CohortCharacteristics",
    "section": "summariseCohortAttrition",
    "text": "summariseCohortAttrition\n\nsummariseCohortAttrition extracts the data from attrition(cdm$dus_cohort) in a standard format:\n\n\n\nresult &lt;- summariseCohortAttrition(cohort = cdm$acetaminophen)\nglimpse(x = result)\n\nRows: 44\nColumns: 13\n$ result_id        &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ cdm_name         &lt;chr&gt; \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBl…\n$ group_name       &lt;chr&gt; \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_name\", \"co…\n$ group_level      &lt;chr&gt; \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"acetami…\n$ strata_name      &lt;chr&gt; \"reason\", \"reason\", \"reason\", \"reason\", \"reason\", \"reason\", \"reason\", \"reason\", \"reason\", \"re…\n$ strata_level     &lt;chr&gt; \"Initial qualifying events\", \"Initial qualifying events\", \"Initial qualifying events\", \"Initi…\n$ variable_name    &lt;chr&gt; \"number_records\", \"number_subjects\", \"excluded_records\", \"excluded_subjects\", \"number_records…\n$ variable_level   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ estimate_name    &lt;chr&gt; \"count\", \"count\", \"count\", \"count\", \"count\", \"count\", \"count\", \"count\", \"count\", \"count\", \"co…\n$ estimate_type    &lt;chr&gt; \"integer\", \"integer\", \"integer\", \"integer\", \"integer\", \"integer\", \"integer\", \"integer\", \"inte…\n$ estimate_value   &lt;chr&gt; \"14205\", \"2679\", \"0\", \"0\", \"14205\", \"2679\", \"0\", \"0\", \"14205\", \"2679\", \"0\", \"0\", \"14205\", \"26…\n$ additional_name  &lt;chr&gt; \"reason_id\", \"reason_id\", \"reason_id\", \"reason_id\", \"reason_id\", \"reason_id\", \"reason_id\", \"r…\n$ additional_level &lt;chr&gt; \"1\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", \"3\", \"4\", \"4\", \"4\", \"4\", \"5\", \"5\", \"5\"…"
  },
  {
    "objectID": "CohortCharacteristics/index.html#summarisecohortattrition-1",
    "href": "CohortCharacteristics/index.html#summarisecohortattrition-1",
    "title": "CohortCharacteristics",
    "section": "summariseCohortAttrition",
    "text": "summariseCohortAttrition\n\nsettings(result) |&gt;\n  glimpse()\n\nRows: 1\nColumns: 13\n$ result_id             &lt;int&gt; 1\n$ result_type           &lt;chr&gt; \"summarise_cohort_attrition\"\n$ package_name          &lt;chr&gt; \"CohortCharacteristics\"\n$ package_version       &lt;chr&gt; \"1.0.0\"\n$ group                 &lt;chr&gt; \"cohort_name\"\n$ strata                &lt;chr&gt; \"reason\"\n$ additional            &lt;chr&gt; \"reason_id\"\n$ min_cell_count        &lt;chr&gt; \"0\"\n$ cdm_version           &lt;chr&gt; \"5.3\"\n$ cohort_definition_id  &lt;chr&gt; \"1\"\n$ min_prior_observation &lt;chr&gt; \"180\"\n$ table_name            &lt;chr&gt; \"acetaminophen\"\n$ vocabulary_version    &lt;chr&gt; \"v5.0 18-JAN-19\""
  },
  {
    "objectID": "CohortCharacteristics/index.html#brief-mention-of-summaried_result",
    "href": "CohortCharacteristics/index.html#brief-mention-of-summaried_result",
    "title": "CohortCharacteristics",
    "section": "brief mention of summaried_result",
    "text": "brief mention of summaried_result\n object consist on the main table that we have seen + a table of settings.\n\nbind Join multiple results objects.\nsettings Read the settings of the result object.\nsuppress Suppress the results to counts less than a certain number.\nexportSummarisedResult Export the result object to a csv file.\nimportSummarisedResult Import a result object from a csv file."
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablecohortattrition",
    "href": "CohortCharacteristics/index.html#tablecohortattrition",
    "title": "CohortCharacteristics",
    "section": "tableCohortAttrition",
    "text": "tableCohortAttrition\n\n\n\ntableCohortAttrition(result = result)\n\n\n\n\n\n\n\n\n\n\n\n\n\nReason\n\nVariable name\n\n\n\nnumber_records\nnumber_subjects\nexcluded_records\nexcluded_subjects\n\n\n\n\nGiBleed; acetaminophen\n\n\nInitial qualifying events\n14,205\n2,679\n0\n0\n\n\nRecord start &lt;= record end\n14,205\n2,679\n0\n0\n\n\nRecord in observation\n14,205\n2,679\n0\n0\n\n\nNon-missing sex\n14,205\n2,679\n0\n0\n\n\nNon-missing year of birth\n14,205\n2,679\n0\n0\n\n\nMerge overlapping records\n13,908\n2,679\n297\n0\n\n\nCollapse cohort with a gap of 30 days.\n13,860\n2,679\n48\n0\n\n\nNot in cohort acetaminophen between -180 & -1 days relative to cohort_start_date\n13,506\n2,679\n354\n0\n\n\nPrior observation requirement: 180 days\n13,361\n2,677\n145\n2\n\n\ncohort_start_date after 1990-01-01\n5,401\n2,340\n7,960\n337\n\n\ncohort_start_date before 2019-12-31\n5,401\n2,340\n0\n0"
  },
  {
    "objectID": "CohortCharacteristics/index.html#export-the-gt-table",
    "href": "CohortCharacteristics/index.html#export-the-gt-table",
    "title": "CohortCharacteristics",
    "section": "Export the gt table",
    "text": "Export the gt table\ngt tables can easily be exported:\n\ntab &lt;- tableCohortAttrition(result = result)\ngtsave(data = tab, filename = here(\"attrition.docx\")) # pdf/html/png also allowed"
  },
  {
    "objectID": "CohortCharacteristics/index.html#flextable-is-also-supported",
    "href": "CohortCharacteristics/index.html#flextable-is-also-supported",
    "title": "CohortCharacteristics",
    "section": "flextable is also supported",
    "text": "flextable is also supported\n\ntableCohortAttrition(result = result, type = \"flextable\")\n\n\n\n\n\n\nReason\nVariable name\n\n\nnumber_records\nnumber_subjects\nexcluded_records\nexcluded_subjects\n\n\n\nGiBleed; acetaminophen\n\nInitial qualifying events\n14,205\n2,679\n0\n0\n\n\nRecord start &lt;= record end\n14,205\n2,679\n0\n0\n\n\nRecord in observation\n14,205\n2,679\n0\n0\n\n\nNon-missing sex\n14,205\n2,679\n0\n0\n\n\nNon-missing year of birth\n14,205\n2,679\n0\n0\n\n\nMerge overlapping records\n13,908\n2,679\n297\n0\n\n\nCollapse cohort with a gap of 30 days.\n13,860\n2,679\n48\n0\n\n\nNot in cohort acetaminophen between -180 & -1 days relative to cohort_start_date\n13,506\n2,679\n354\n0\n\n\nPrior observation requirement: 180 days\n13,361\n2,677\n145\n2\n\n\ncohort_start_date after 1990-01-01\n5,401\n2,340\n7,960\n337\n\n\ncohort_start_date before 2019-12-31\n5,401\n2,340\n0\n0"
  },
  {
    "objectID": "CohortCharacteristics/index.html#plotcohortattrition",
    "href": "CohortCharacteristics/index.html#plotcohortattrition",
    "title": "CohortCharacteristics",
    "section": "plotCohortAttrition",
    "text": "plotCohortAttrition\n\n\nplotCohortAttrition(result = result)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#your-turn",
    "href": "CohortCharacteristics/index.html#your-turn",
    "title": "CohortCharacteristics",
    "section": "Your turn",
    "text": "Your turn\nCan you visualise the attrition of a simvastatin cohort?\n\nAny record of simvastatin\n\nCollapse records separated by 90 days or less in the same episode.\nFirst record ever.\nAt least 365 days of prior observation.\nIndex date between 1990 and 2019\n\n\nCan you suppress counts under 10?"
  },
  {
    "objectID": "CohortCharacteristics/index.html#result",
    "href": "CohortCharacteristics/index.html#result",
    "title": "CohortCharacteristics",
    "section": "Result",
    "text": "Result"
  },
  {
    "objectID": "CohortCharacteristics/index.html#solution",
    "href": "CohortCharacteristics/index.html#solution",
    "title": "CohortCharacteristics",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\n# create codelist\ncodelist &lt;- getDrugIngredientCodes(cdm = cdm, name = \"simvastatin\")\n\n# create cohort\ncdm$simvastatin_cohort &lt;- conceptCohort(\n  cdm = cdm,\n  conceptSet = codelist, \n  name = \"simvastatin_cohort\", \n  exit = \"event_end_date\"\n) |&gt;\n  collapseCohorts(gap = 90) |&gt;\n  requireIsFirstEntry() |&gt;\n  requirePriorObservation(minPriorObservation = 365) |&gt;\n  requireInDateRange(dateRange = as.Date(c(\"1990-01-01\", \"2019-12-31\")))\n\n# summarise attrition\nresult &lt;- cdm$simvastatin_cohort |&gt;\n  summariseCohortAttrition() |&gt;\n  suppress(minCellCount = 10)\n\n# plot attrition\nplotCohortAttrition(result)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#summarisecharacteristics",
    "href": "CohortCharacteristics/index.html#summarisecharacteristics",
    "title": "CohortCharacteristics",
    "section": "summariseCharacteristics",
    "text": "summariseCharacteristics\nsummariseCharacteristics() summarises the demographics of the cohort by default, but you can use the intersect arguments to evaluate:\n\nNumber of visits\nPresence of medicines or conditions\n…\n\n\nYou need to identify the medications and/or conditions of interest as a codelist or cohort beforehand."
  },
  {
    "objectID": "CohortCharacteristics/index.html#lets-create-some-codelists",
    "href": "CohortCharacteristics/index.html#lets-create-some-codelists",
    "title": "CohortCharacteristics",
    "section": "Let’s create some codelists",
    "text": "Let’s create some codelists\n\nmedications &lt;- getDrugIngredientCodes(\n  cdm = cdm, \n  name = c(\"warfarin\", \"morphine\", \"verapamil\", \"atorvastatin\", \"nitroglycerin\"), \n  nameStyle = \"{concept_name}\"\n)\nconditions &lt;- list(\n  \"fever\" = getCandidateCodes(cdm = cdm, keywords = \"fever\")$concept_id,\n  \"cough\" = getCandidateCodes(cdm = cdm, keywords = \"cough\")$concept_id,\n  \"cardiac_arrest\" = getCandidateCodes(cdm = cdm, keywords = \"cardiac arrest\")$concept_id,\n  \"myocardial_infarction\" = getCandidateCodes(cdm = cdm, keywords = \"myocardial infarction\")$concept_id,\n  \"headache\" = getCandidateCodes(cdm = cdm, keywords = \"headache\")$concept_id\n)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#summarisecharacteristics-1",
    "href": "CohortCharacteristics/index.html#summarisecharacteristics-1",
    "title": "CohortCharacteristics",
    "section": "summariseCharacteristics",
    "text": "summariseCharacteristics\n\nresult &lt;- cdm$acetaminophen |&gt;\n  addSex() |&gt;\n  summariseCharacteristics(\n    strata = list(\"sex\"),\n    demographics = TRUE,\n    ageGroup = list(c(0, 19), c(20, 39), c(40, 59), c(60, 79), c(80, Inf)),\n    tableIntersectCount = list(\n      \"Number visits prior year\" = list(tableName = \"visit_occurrence\", window = c(-365, -1))\n    ),\n    conceptIntersectFlag = list(\n      \"Conditions any time prior\" = list(conceptSet = conditions, window = c(-Inf, -1)),\n      \"Medications prior year\" = list(conceptSet = medications, window = c(-365, -1))\n    )\n  )\nresult |&gt;\n  glimpse()\n\nRows: 239\nColumns: 13\n$ result_id        &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ cdm_name         &lt;chr&gt; \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBleed\", \"GiBl…\n$ group_name       &lt;chr&gt; \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_name\", \"co…\n$ group_level      &lt;chr&gt; \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"acetami…\n$ strata_name      &lt;chr&gt; \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"over…\n$ strata_level     &lt;chr&gt; \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"over…\n$ variable_name    &lt;chr&gt; \"Number records\", \"Number subjects\", \"Cohort start date\", \"Cohort start date\", \"Cohort start …\n$ variable_level   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, \"0 to 19\", \"0 to …\n$ estimate_name    &lt;chr&gt; \"count\", \"count\", \"min\", \"q25\", \"median\", \"q75\", \"max\", \"min\", \"q25\", \"median\", \"q75\", \"max\",…\n$ estimate_type    &lt;chr&gt; \"integer\", \"integer\", \"date\", \"date\", \"date\", \"date\", \"date\", \"date\", \"date\", \"date\", \"date\",…\n$ estimate_value   &lt;chr&gt; \"5401\", \"2340\", \"1990-01-01\", \"1996-04-28\", \"2004-01-07\", \"2011-10-21\", \"2019-06-20\", \"1990-0…\n$ additional_name  &lt;chr&gt; \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"over…\n$ additional_level &lt;chr&gt; \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"overall\", \"over…"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablecharacteristics",
    "href": "CohortCharacteristics/index.html#tablecharacteristics",
    "title": "CohortCharacteristics",
    "section": "tableCharacteristics",
    "text": "tableCharacteristics\n\ntableCharacteristics(result = result)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCDM name\n\n\n\n\n\nGiBleed\n\n\n\nSex\nVariable name\nVariable level\nEstimate name\n\nCohort name\n\n\n\nacetaminophen\n\n\n\n\noverall\nNumber records\n-\nN\n5,401\n\n\n\nNumber subjects\n-\nN\n2,340\n\n\n\nCohort start date\n-\nMedian [Q25 - Q75]\n2004-01-07 [1996-04-28 - 2011-10-21]\n\n\n\n\n\nRange\n1990-01-01 to 2019-06-20\n\n\n\nCohort end date\n-\nMedian [Q25 - Q75]\n2004-01-21 [1996-05-12 - 2011-11-07]\n\n\n\n\n\nRange\n1990-01-10 to 2019-06-24\n\n\n\nAge\n-\nMedian [Q25 - Q75]\n43 [32 - 55]\n\n\n\n\n\nMean (SD)\n44.58 (17.93)\n\n\n\n\n\nRange\n5 to 108\n\n\n\nAge group\n0 to 19\nN (%)\n366 (6.78%)\n\n\n\n\n20 to 39\nN (%)\n1,909 (35.35%)\n\n\n\n\n40 to 59\nN (%)\n2,117 (39.20%)\n\n\n\n\n60 to 79\nN (%)\n784 (14.52%)\n\n\n\n\n80 or above\nN (%)\n225 (4.17%)\n\n\n\nSex\nFemale\nN (%)\n2,687 (49.75%)\n\n\n\n\nMale\nN (%)\n2,714 (50.25%)\n\n\n\nPrior observation\n-\nMedian [Q25 - Q75]\n15,837 [11,937 - 20,419]\n\n\n\n\n\nMean (SD)\n16,464.35 (6,548.63)\n\n\n\n\n\nRange\n1,851 to 39,792\n\n\n\nFuture observation\n-\nMedian [Q25 - Q75]\n5,193 [2,385 - 8,100]\n\n\n\n\n\nMean (SD)\n5,213.44 (3,203.25)\n\n\n\n\n\nRange\n0 to 10,720\n\n\n\nDays in cohort\n-\nMedian [Q25 - Q75]\n15 [8 - 15]\n\n\n\n\n\nMean (SD)\n16.95 (15.69)\n\n\n\n\n\nRange\n1 to 128\n\n\n\nNumber visits prior year\n-\nMedian [Q25 - Q75]\n0.00 [0.00 - 0.00]\n\n\n\n\n\nMean (SD)\n0.01 (0.08)\n\n\n\n\n\nRange\n0.00 to 1.00\n\n\n\nConditions any time prior\nCardiac arrest\nN (%)\n210 (3.89%)\n\n\n\n\nMyocardial infarction\nN (%)\n17 (0.31%)\n\n\n\n\nCough\nN (%)\n0 (0.00%)\n\n\n\n\nFever\nN (%)\n0 (0.00%)\n\n\n\n\nHeadache\nN (%)\n0 (0.00%)\n\n\n\nMedications prior year\nNitroglycerin\nN (%)\n104 (1.93%)\n\n\n\n\nWarfarin\nN (%)\n8 (0.15%)\n\n\n\n\nVerapamil\nN (%)\n8 (0.15%)\n\n\n\n\nMorphine\nN (%)\n6 (0.11%)\n\n\n\n\nAtorvastatin\nN (%)\n0 (0.00%)\n\n\nFemale\nNumber records\n-\nN\n2,687\n\n\n\nNumber subjects\n-\nN\n1,168\n\n\n\nCohort start date\n-\nMedian [Q25 - Q75]\n2004-02-01 [1996-08-10 - 2011-07-11]\n\n\n\n\n\nRange\n1990-01-02 to 2019-06-19\n\n\n\nCohort end date\n-\nMedian [Q25 - Q75]\n2004-02-19 [1996-08-20 - 2011-07-19]\n\n\n\n\n\nRange\n1990-01-16 to 2019-06-24\n\n\n\nAge\n-\nMedian [Q25 - Q75]\n42 [32 - 55]\n\n\n\n\n\nMean (SD)\n44.27 (18.08)\n\n\n\n\n\nRange\n5 to 108\n\n\n\nAge group\n0 to 19\nN (%)\n181 (6.74%)\n\n\n\n\n20 to 39\nN (%)\n980 (36.47%)\n\n\n\n\n40 to 59\nN (%)\n1,047 (38.97%)\n\n\n\n\n60 to 79\nN (%)\n358 (13.32%)\n\n\n\n\n80 or above\nN (%)\n121 (4.50%)\n\n\n\nSex\nFemale\nN (%)\n2,687 (100.00%)\n\n\n\nPrior observation\n-\nMedian [Q25 - Q75]\n15,632 [11,772 - 20,152]\n\n\n\n\n\nMean (SD)\n16,353.62 (6,603.54)\n\n\n\n\n\nRange\n1,851 to 39,792\n\n\n\nFuture observation\n-\nMedian [Q25 - Q75]\n5,235 [2,602 - 8,028]\n\n\n\n\n\nMean (SD)\n5,268.14 (3,141.99)\n\n\n\n\n\nRange\n0 to 10,713\n\n\n\nDays in cohort\n-\nMedian [Q25 - Q75]\n15 [8 - 15]\n\n\n\n\n\nMean (SD)\n17.28 (16.24)\n\n\n\n\n\nRange\n1 to 97\n\n\n\nNumber visits prior year\n-\nMedian [Q25 - Q75]\n0.00 [0.00 - 0.00]\n\n\n\n\n\nMean (SD)\n0.01 (0.08)\n\n\n\n\n\nRange\n0.00 to 1.00\n\n\n\nConditions any time prior\nCardiac arrest\nN (%)\n120 (4.47%)\n\n\n\n\nMyocardial infarction\nN (%)\n1 (0.04%)\n\n\n\n\nCough\nN (%)\n0 (0.00%)\n\n\n\n\nFever\nN (%)\n0 (0.00%)\n\n\n\n\nHeadache\nN (%)\n0 (0.00%)\n\n\n\nMedications prior year\nNitroglycerin\nN (%)\n21 (0.78%)\n\n\n\n\nWarfarin\nN (%)\n2 (0.07%)\n\n\n\n\nVerapamil\nN (%)\n2 (0.07%)\n\n\n\n\nMorphine\nN (%)\n4 (0.15%)\n\n\n\n\nAtorvastatin\nN (%)\n0 (0.00%)\n\n\nMale\nNumber records\n-\nN\n2,714\n\n\n\nNumber subjects\n-\nN\n1,172\n\n\n\nCohort start date\n-\nMedian [Q25 - Q75]\n2003-12-10 [1996-03-11 - 2012-02-06]\n\n\n\n\n\nRange\n1990-01-01 to 2019-06-20\n\n\n\nCohort end date\n-\nMedian [Q25 - Q75]\n2003-12-26 [1996-03-27 - 2012-02-17]\n\n\n\n\n\nRange\n1990-01-10 to 2019-06-20\n\n\n\nAge\n-\nMedian [Q25 - Q75]\n44 [32 - 56]\n\n\n\n\n\nMean (SD)\n44.88 (17.78)\n\n\n\n\n\nRange\n5 to 105\n\n\n\nAge group\n0 to 19\nN (%)\n185 (6.82%)\n\n\n\n\n20 to 39\nN (%)\n929 (34.23%)\n\n\n\n\n40 to 59\nN (%)\n1,070 (39.43%)\n\n\n\n\n60 to 79\nN (%)\n426 (15.70%)\n\n\n\n\n80 or above\nN (%)\n104 (3.83%)\n\n\n\nSex\nMale\nN (%)\n2,714 (100.00%)\n\n\n\nPrior observation\n-\nMedian [Q25 - Q75]\n16,107 [12,010 - 20,689]\n\n\n\n\n\nMean (SD)\n16,573.97 (6,493.16)\n\n\n\n\n\nRange\n2,070 to 38,529\n\n\n\nFuture observation\n-\nMedian [Q25 - Q75]\n5,101 [2,223 - 8,132]\n\n\n\n\n\nMean (SD)\n5,159.29 (3,262.43)\n\n\n\n\n\nRange\n0 to 10,720\n\n\n\nDays in cohort\n-\nMedian [Q25 - Q75]\n15 [8 - 15]\n\n\n\n\n\nMean (SD)\n16.63 (15.12)\n\n\n\n\n\nRange\n1 to 128\n\n\n\nNumber visits prior year\n-\nMedian [Q25 - Q75]\n0.00 [0.00 - 0.00]\n\n\n\n\n\nMean (SD)\n0.00 (0.07)\n\n\n\n\n\nRange\n0.00 to 1.00\n\n\n\nConditions any time prior\nCardiac arrest\nN (%)\n90 (3.32%)\n\n\n\n\nMyocardial infarction\nN (%)\n16 (0.59%)\n\n\n\n\nCough\nN (%)\n0 (0.00%)\n\n\n\n\nFever\nN (%)\n0 (0.00%)\n\n\n\n\nHeadache\nN (%)\n0 (0.00%)\n\n\n\nMedications prior year\nNitroglycerin\nN (%)\n83 (3.06%)\n\n\n\n\nWarfarin\nN (%)\n6 (0.22%)\n\n\n\n\nVerapamil\nN (%)\n6 (0.22%)\n\n\n\n\nMorphine\nN (%)\n2 (0.07%)\n\n\n\n\nAtorvastatin\nN (%)\n0 (0.00%)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablecharacteristics-1",
    "href": "CohortCharacteristics/index.html#tablecharacteristics-1",
    "title": "CohortCharacteristics",
    "section": "tableCharacteristics",
    "text": "tableCharacteristics\n\ntableCharacteristics(\n  result = result,\n  header = c(\"cdm_name\", \"sex\"),\n  groupColumn = c(\"cohort_name\")\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCDM name\n\n\n\n\n\nGiBleed\n\n\n\nVariable name\nVariable level\nEstimate name\n\nSex\n\n\n\noverall\nFemale\nMale\n\n\n\n\nacetaminophen\n\n\nNumber records\n-\nN\n5,401\n2,687\n2,714\n\n\nNumber subjects\n-\nN\n2,340\n1,168\n1,172\n\n\nCohort start date\n-\nMedian [Q25 - Q75]\n2004-01-07 [1996-04-28 - 2011-10-21]\n2004-02-01 [1996-08-10 - 2011-07-11]\n2003-12-10 [1996-03-11 - 2012-02-06]\n\n\n\n\nRange\n1990-01-01 to 2019-06-20\n1990-01-02 to 2019-06-19\n1990-01-01 to 2019-06-20\n\n\nCohort end date\n-\nMedian [Q25 - Q75]\n2004-01-21 [1996-05-12 - 2011-11-07]\n2004-02-19 [1996-08-20 - 2011-07-19]\n2003-12-26 [1996-03-27 - 2012-02-17]\n\n\n\n\nRange\n1990-01-10 to 2019-06-24\n1990-01-16 to 2019-06-24\n1990-01-10 to 2019-06-20\n\n\nAge\n-\nMedian [Q25 - Q75]\n43 [32 - 55]\n42 [32 - 55]\n44 [32 - 56]\n\n\n\n\nMean (SD)\n44.58 (17.93)\n44.27 (18.08)\n44.88 (17.78)\n\n\n\n\nRange\n5 to 108\n5 to 108\n5 to 105\n\n\nAge group\n0 to 19\nN (%)\n366 (6.78%)\n181 (6.74%)\n185 (6.82%)\n\n\n\n20 to 39\nN (%)\n1,909 (35.35%)\n980 (36.47%)\n929 (34.23%)\n\n\n\n40 to 59\nN (%)\n2,117 (39.20%)\n1,047 (38.97%)\n1,070 (39.43%)\n\n\n\n60 to 79\nN (%)\n784 (14.52%)\n358 (13.32%)\n426 (15.70%)\n\n\n\n80 or above\nN (%)\n225 (4.17%)\n121 (4.50%)\n104 (3.83%)\n\n\nSex\nFemale\nN (%)\n2,687 (49.75%)\n2,687 (100.00%)\n-\n\n\n\nMale\nN (%)\n2,714 (50.25%)\n-\n2,714 (100.00%)\n\n\nPrior observation\n-\nMedian [Q25 - Q75]\n15,837 [11,937 - 20,419]\n15,632 [11,772 - 20,152]\n16,107 [12,010 - 20,689]\n\n\n\n\nMean (SD)\n16,464.35 (6,548.63)\n16,353.62 (6,603.54)\n16,573.97 (6,493.16)\n\n\n\n\nRange\n1,851 to 39,792\n1,851 to 39,792\n2,070 to 38,529\n\n\nFuture observation\n-\nMedian [Q25 - Q75]\n5,193 [2,385 - 8,100]\n5,235 [2,602 - 8,028]\n5,101 [2,223 - 8,132]\n\n\n\n\nMean (SD)\n5,213.44 (3,203.25)\n5,268.14 (3,141.99)\n5,159.29 (3,262.43)\n\n\n\n\nRange\n0 to 10,720\n0 to 10,713\n0 to 10,720\n\n\nDays in cohort\n-\nMedian [Q25 - Q75]\n15 [8 - 15]\n15 [8 - 15]\n15 [8 - 15]\n\n\n\n\nMean (SD)\n16.95 (15.69)\n17.28 (16.24)\n16.63 (15.12)\n\n\n\n\nRange\n1 to 128\n1 to 97\n1 to 128\n\n\nNumber visits prior year\n-\nMedian [Q25 - Q75]\n0.00 [0.00 - 0.00]\n0.00 [0.00 - 0.00]\n0.00 [0.00 - 0.00]\n\n\n\n\nMean (SD)\n0.01 (0.08)\n0.01 (0.08)\n0.00 (0.07)\n\n\n\n\nRange\n0.00 to 1.00\n0.00 to 1.00\n0.00 to 1.00\n\n\nConditions any time prior\nCardiac arrest\nN (%)\n210 (3.89%)\n120 (4.47%)\n90 (3.32%)\n\n\n\nMyocardial infarction\nN (%)\n17 (0.31%)\n1 (0.04%)\n16 (0.59%)\n\n\n\nCough\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nFever\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nHeadache\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\nMedications prior year\nNitroglycerin\nN (%)\n104 (1.93%)\n21 (0.78%)\n83 (3.06%)\n\n\n\nWarfarin\nN (%)\n8 (0.15%)\n2 (0.07%)\n6 (0.22%)\n\n\n\nVerapamil\nN (%)\n8 (0.15%)\n2 (0.07%)\n6 (0.22%)\n\n\n\nMorphine\nN (%)\n6 (0.11%)\n4 (0.15%)\n2 (0.07%)\n\n\n\nAtorvastatin\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablecharacteristics-2",
    "href": "CohortCharacteristics/index.html#tablecharacteristics-2",
    "title": "CohortCharacteristics",
    "section": "tableCharacteristics",
    "text": "tableCharacteristics\n\nresult |&gt;\n  filter(!estimate_name %in% c(\"min\", \"max\", \"mean\", \"sd\")) |&gt;\n  tableCharacteristics(\n    header = c(\"cdm_name\", \"sex\"),\n    groupColumn = c(\"cohort_name\")\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCDM name\nVariable name\nVariable level\nEstimate name\n\nSex\n\n\n\noverall\nFemale\nMale\n\n\n\n\nacetaminophen\n\n\nGiBleed\nNumber records\n-\nN\n5,401\n2,687\n2,714\n\n\n\nNumber subjects\n-\nN\n2,340\n1,168\n1,172\n\n\n\nCohort start date\n-\nMedian [Q25 - Q75]\n2004-01-07 [1996-04-28 - 2011-10-21]\n2004-02-01 [1996-08-10 - 2011-07-11]\n2003-12-10 [1996-03-11 - 2012-02-06]\n\n\n\nCohort end date\n-\nMedian [Q25 - Q75]\n2004-01-21 [1996-05-12 - 2011-11-07]\n2004-02-19 [1996-08-20 - 2011-07-19]\n2003-12-26 [1996-03-27 - 2012-02-17]\n\n\n\nAge\n-\nMedian [Q25 - Q75]\n43 [32 - 55]\n42 [32 - 55]\n44 [32 - 56]\n\n\n\nAge group\n0 to 19\nN (%)\n366 (6.78%)\n181 (6.74%)\n185 (6.82%)\n\n\n\n\n20 to 39\nN (%)\n1,909 (35.35%)\n980 (36.47%)\n929 (34.23%)\n\n\n\n\n40 to 59\nN (%)\n2,117 (39.20%)\n1,047 (38.97%)\n1,070 (39.43%)\n\n\n\n\n60 to 79\nN (%)\n784 (14.52%)\n358 (13.32%)\n426 (15.70%)\n\n\n\n\n80 or above\nN (%)\n225 (4.17%)\n121 (4.50%)\n104 (3.83%)\n\n\n\nSex\nFemale\nN (%)\n2,687 (49.75%)\n2,687 (100.00%)\n-\n\n\n\n\nMale\nN (%)\n2,714 (50.25%)\n-\n2,714 (100.00%)\n\n\n\nPrior observation\n-\nMedian [Q25 - Q75]\n15,837 [11,937 - 20,419]\n15,632 [11,772 - 20,152]\n16,107 [12,010 - 20,689]\n\n\n\nFuture observation\n-\nMedian [Q25 - Q75]\n5,193 [2,385 - 8,100]\n5,235 [2,602 - 8,028]\n5,101 [2,223 - 8,132]\n\n\n\nDays in cohort\n-\nMedian [Q25 - Q75]\n15 [8 - 15]\n15 [8 - 15]\n15 [8 - 15]\n\n\n\nNumber visits prior year\n-\nMedian [Q25 - Q75]\n0.00 [0.00 - 0.00]\n0.00 [0.00 - 0.00]\n0.00 [0.00 - 0.00]\n\n\n\nConditions any time prior\nCardiac arrest\nN (%)\n210 (3.89%)\n120 (4.47%)\n90 (3.32%)\n\n\n\n\nMyocardial infarction\nN (%)\n17 (0.31%)\n1 (0.04%)\n16 (0.59%)\n\n\n\n\nCough\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\n\nFever\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\n\nHeadache\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nMedications prior year\nNitroglycerin\nN (%)\n104 (1.93%)\n21 (0.78%)\n83 (3.06%)\n\n\n\n\nWarfarin\nN (%)\n8 (0.15%)\n2 (0.07%)\n6 (0.22%)\n\n\n\n\nVerapamil\nN (%)\n8 (0.15%)\n2 (0.07%)\n6 (0.22%)\n\n\n\n\nMorphine\nN (%)\n6 (0.11%)\n4 (0.15%)\n2 (0.07%)\n\n\n\n\nAtorvastatin\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#your-turn-1",
    "href": "CohortCharacteristics/index.html#your-turn-1",
    "title": "CohortCharacteristics",
    "section": "Your turn",
    "text": "Your turn\nCharacterise the ‘simvastatin’ cohort with:\n\nDemographics\nTwo age groups: 0-49; &gt;=50\nNumber of records in condition_occurrence on the index date.\nUsing same drugs than for acetaminophen which ones where used in the prior year including index date\n\nUsing same conditions than for acetaminophen which ones where used any time prior including index date\n\n\n\nSuppress counts under 10\n\n\nVisualise it in a nice table\n\n\nCan you stratify the result by age group? (PatientProfiles::addAge() allows you to add age_group column to any table)."
  },
  {
    "objectID": "CohortCharacteristics/index.html#result-1",
    "href": "CohortCharacteristics/index.html#result-1",
    "title": "CohortCharacteristics",
    "section": "Result",
    "text": "Result\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVariable name\nVariable level\nEstimate name\n\nAge group\n\n\n\noverall\n0 to 49\n50 or above\n\n\n\n\n36567_simvastatin\n\n\nNumber records\n-\nN\n182\n61\n121\n\n\nNumber subjects\n-\nN\n182\n61\n121\n\n\nCohort start date\n-\nMedian [Q25 - Q75]\n2002-12-21 [1992-07-12 - 2011-12-20]\n1995-06-24 [1992-03-06 - 2003-02-25]\n2007-02-25 [1993-01-23 - 2014-03-16]\n\n\nCohort end date\n-\nMedian [Q25 - Q75]\n2002-12-21 [1992-07-12 - 2011-12-20]\n1995-06-24 [1992-03-06 - 2003-02-25]\n2007-02-25 [1993-01-23 - 2014-03-16]\n\n\nAge\n-\nMedian [Q25 - Q75]\n57 [42 - 72]\n37 [33 - 42]\n68 [57 - 77]\n\n\nAge group\n0 to 49\nN (%)\n61 (33.52%)\n61 (100.00%)\n-\n\n\n\n50 or above\nN (%)\n121 (66.48%)\n-\n121 (100.00%)\n\n\nSex\nFemale\nN (%)\n47 (25.82%)\n19 (31.15%)\n28 (23.14%)\n\n\n\nMale\nN (%)\n135 (74.18%)\n42 (68.85%)\n93 (76.86%)\n\n\nPrior observation\n-\nMedian [Q25 - Q75]\n21,136 [15,351 - 26,352]\n13,594 [12,138 - 15,351]\n24,955 [21,140 - 28,280]\n\n\nFuture observation\n-\nMedian [Q25 - Q75]\n3,238 [1,503 - 6,678]\n6,391 [3,466 - 9,072]\n2,275 [1,292 - 4,824]\n\n\nDays in cohort\n-\nMedian [Q25 - Q75]\n1 [1 - 1]\n1 [1 - 1]\n1 [1 - 1]\n\n\nNumber conditions on index\n-\nMedian [Q25 - Q75]\n1.00 [0.00 - 1.00]\n1.00 [0.00 - 1.00]\n1.00 [1.00 - 1.00]\n\n\nConditions any time prior\nCardiac arrest\nN (%)\n&lt;10\n&lt;10\n&lt;10\n\n\n\nMyocardial infarction\nN (%)\n&lt;10\n&lt;10\n&lt;10\n\n\n\nCough\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nFever\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nHeadache\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\nMedications prior year\nNitroglycerin\nN (%)\n155 (85.16%)\n44 (72.13%)\n111 (91.74%)\n\n\n\nAtorvastatin\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nMorphine\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nVerapamil\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)\n\n\n\nWarfarin\nN (%)\n0 (0.00%)\n0 (0.00%)\n0 (0.00%)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#solution-1",
    "href": "CohortCharacteristics/index.html#solution-1",
    "title": "CohortCharacteristics",
    "section": "Solution",
    "text": "Solution\n\n💡 Click to see solution\n\nresult &lt;- cdm$simvastatin_cohort |&gt;\n  PatientProfiles::addAge(ageGroup = list(c(0, 49), c(50, Inf))) |&gt;\n  summariseCharacteristics(\n    strata = list(\"age_group\"),\n    demographics = TRUE,\n    ageGroup = list(c(0, 49), c(50, Inf)),\n    tableIntersectCount = list(\n      \"Number conditions on index\" = list(tableName = \"condition_occurrence\", window = c(0, 0))\n    ),\n    cohortIntersectFlag = list(\n      \"Conditions any time prior\" = list(targetCohortTable = \"conditions\", window = c(-Inf, 0)),\n      \"Medications prior year\" = list(targetCohortTable = \"medications\", window = c(-365, 0))\n    )\n  )\nresult |&gt;\n  suppress(minCellCount = 10) |&gt;\n  dplyr::filter(!estimate_name %in% c(\"min\", \"max\", \"mean\", \"sd\")) |&gt;\n  tableCharacteristics(\n    header = \"age_group\", \n    groupColumn = \"cohort_name\",\n    hide = c(\"table\", \"window\", \"value\", \"cdm_name\")\n  )"
  },
  {
    "objectID": "CohortCharacteristics/index.html#summariselargescalecharacteristics",
    "href": "CohortCharacteristics/index.html#summariselargescalecharacteristics",
    "title": "CohortCharacteristics",
    "section": "summariseLargeScaleCharacteristics",
    "text": "summariseLargeScaleCharacteristics\nLarge scale characterisation is a data driven approach to characterise data and find which are the most frequently concepts in the desired windows of observation.\n\n\nresult &lt;- cdm$acetaminophen |&gt;\n  summariseLargeScaleCharacteristics(\n    strata = list(),\n    window = list(c(-365, -1), c(0, 0), c(1, 365)), \n    eventInWindow = c(\"condition_occurrence\", \"observation\"), \n    episodeInWindow =  \"drug_exposure\", \n    minimumFrequency = 0\n  )"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tabletoplargescalecharacteristics",
    "href": "CohortCharacteristics/index.html#tabletoplargescalecharacteristics",
    "title": "CohortCharacteristics",
    "section": "tableTopLargeScaleCharacteristics",
    "text": "tableTopLargeScaleCharacteristics\n\n\n\nresult |&gt;\n  filterSettings(table_name == \"drug_exposure\") |&gt;\n  tableTopLargeScaleCharacteristics(topConcepts = 10)\n\n\n\n\n\n\n\n\n\n\n\n\nTop\n\nWindow\n\n\n\n-365 to -1\n0 to 0\n1 to 365\n\n\n\n\n1\ntetanus and diphtheria toxoids, adsorbed, preservative free, for adult use (40213227)  513 (9.5%)\nAcetaminophen 325 MG Oral Tablet (1127433)  4249 (78.7%)\nAcetaminophen 325 MG Oral Tablet (1127433)  4296 (79.8%)\n\n\n2\nhepatitis A vaccine, adult dosage (40213296)  208 (3.9%)\nAcetaminophen 21.7 MG/ML / Dextromethorphan Hydrobromide 1 MG/ML / doxylamine succinate 0.417 MG/ML Oral Solution (40229134)  874 (16.2%)\nAcetaminophen 21.7 MG/ML / Dextromethorphan Hydrobromide 1 MG/ML / doxylamine succinate 0.417 MG/ML Oral Solution (40229134)  908 (16.9%)\n\n\n3\nAcetaminophen 325 MG Oral Tablet (1127433)  172 (3.2%)\nAcetaminophen 325 MG / Hydrocodone Bitartrate 7.5 MG Oral Tablet (40162522)  153 (2.8%)\ntetanus and diphtheria toxoids, adsorbed, preservative free, for adult use (40213227)  473 (8.8%)\n\n\n4\nzoster vaccine, live (40213260)  145 (2.7%)\nAcetaminophen 325 MG / Oxycodone Hydrochloride 5 MG Oral Tablet (40231925)  118 (2.2%)\nhepatitis A vaccine, adult dosage (40213296)  244 (4.5%)\n\n\n5\nAmoxicillin 250 MG / Clavulanate 125 MG Oral Tablet (1713671)  123 (2.3%)\nNitroglycerin 0.4 MG/ACTUAT Mucosal Spray (19126352)  98 (1.8%)\nIbuprofen 200 MG Oral Tablet (19078461)  174 (3.2%)\n\n\n6\nIbuprofen 200 MG Oral Tablet (19078461)  109 (2.0%)\nIbuprofen 200 MG Oral Tablet (19078461)  95 (1.8%)\nhepatitis B vaccine, adult dosage (40213306)  164 (3.0%)\n\n\n7\nNitroglycerin 0.4 MG/ACTUAT Mucosal Spray (19126352)  104 (1.9%)\nclopidogrel 75 MG Oral Tablet (19075601)  86 (1.6%)\nAmoxicillin 250 MG / Clavulanate 125 MG Oral Tablet (1713671)  152 (2.8%)\n\n\n8\nclopidogrel 75 MG Oral Tablet (19075601)  101 (1.9%)\nAmoxicillin 500 MG Oral Tablet (19073188)  83 (1.5%)\nNaproxen sodium 220 MG Oral Tablet (1115171)  120 (2.2%)\n\n\n9\nNaproxen sodium 220 MG Oral Tablet (1115171)  90 (1.7%)\nNaproxen sodium 220 MG Oral Tablet (1115171)  74 (1.4%)\nzoster vaccine, live (40213260)  111 (2.1%)\n\n\n10\nhepatitis B vaccine, adult dosage (40213306)  75 (1.4%)\nAcetaminophen 750 MG / Hydrocodone Bitartrate 7.5 MG Oral Tablet (19133768)  61 (1.1%)\nAmoxicillin 500 MG Oral Tablet (19073188)  97 (1.8%)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablelargescalecharacteristics",
    "href": "CohortCharacteristics/index.html#tablelargescalecharacteristics",
    "title": "CohortCharacteristics",
    "section": "tableLargeScaleCharacteristics",
    "text": "tableLargeScaleCharacteristics\n\n\n\ntableLargeScaleCharacteristics(result = result)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablelargescalecharacteristics-1",
    "href": "CohortCharacteristics/index.html#tablelargescalecharacteristics-1",
    "title": "CohortCharacteristics",
    "section": "tableLargeScaleCharacteristics",
    "text": "tableLargeScaleCharacteristics\n\n\n\ntableLargeScaleCharacteristics(result = result, compareBy = \"variable_level\")"
  },
  {
    "objectID": "CohortCharacteristics/index.html#tablelargescalecharacteristics-2",
    "href": "CohortCharacteristics/index.html#tablelargescalecharacteristics-2",
    "title": "CohortCharacteristics",
    "section": "tableLargeScaleCharacteristics",
    "text": "tableLargeScaleCharacteristics\n\n\n\ntableLargeScaleCharacteristics(result = result, compareBy = \"variable_level\", smdReference = \"-365 to -1\")"
  },
  {
    "objectID": "CohortCharacteristics/index.html#plotlargescalecharacteristics",
    "href": "CohortCharacteristics/index.html#plotlargescalecharacteristics",
    "title": "CohortCharacteristics",
    "section": "plotLargeScaleCharacteristics",
    "text": "plotLargeScaleCharacteristics\n\nplotLargeScaleCharacteristics(result = result)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#plotcomparedlargescalecharacteristics",
    "href": "CohortCharacteristics/index.html#plotcomparedlargescalecharacteristics",
    "title": "CohortCharacteristics",
    "section": "plotComparedLargeScaleCharacteristics",
    "text": "plotComparedLargeScaleCharacteristics\n\nplotComparedLargeScaleCharacteristics(\n  result = result, \n  colour = \"variable_level\", \n  facet = \"table_name\"\n)"
  },
  {
    "objectID": "CohortCharacteristics/index.html#plotcomparedlargescalecharacteristics-1",
    "href": "CohortCharacteristics/index.html#plotcomparedlargescalecharacteristics-1",
    "title": "CohortCharacteristics",
    "section": "plotComparedLargeScaleCharacteristics",
    "text": "plotComparedLargeScaleCharacteristics\n\nplotComparedLargeScaleCharacteristics(\n  result = result, \n  colour = \"variable_level\", \n  facet = \"table_name\"\n) |&gt;\n  ggplotly()"
  },
  {
    "objectID": "CohortCharacteristics/index.html#cohortcharacteristics-1",
    "href": "CohortCharacteristics/index.html#cohortcharacteristics-1",
    "title": "CohortCharacteristics",
    "section": "CohortCharacteristics",
    "text": "CohortCharacteristics\n\n\n👉 Packages website\n👉 CRAN link\n👉 Manual\n📧 marti.catalasabate@ndorms.ox.ac.uk"
  },
  {
    "objectID": "TreatmentPatterns/index.html#installation",
    "href": "TreatmentPatterns/index.html#installation",
    "title": "TreatmentPatterns",
    "section": "Installation",
    "text": "Installation\n\nlibrary(TreatmentPatterns)\nlibrary(CDMConnector)\nlibrary(dplyr)\nlibrary(DBI)\nlibrary(duckdb)\nlibrary(stringr)"
  },
  {
    "objectID": "TreatmentPatterns/index.html#setup",
    "href": "TreatmentPatterns/index.html#setup",
    "title": "TreatmentPatterns",
    "section": "Setup",
    "text": "Setup\n\ndatasetName &lt;- \"GiBleed\"\nrequireEunomia(datasetName = datasetName)\ncon &lt;- dbConnect(drv = duckdb(dbdir = eunomiaDir(datasetName = datasetName)))\ncdm &lt;- cdmFromCon(con = con, cdmSchema = \"main\", writeSchema = \"main\", cdmName = datasetName)\n\n\ncdm\n\n\n\n\n── # OMOP CDM reference (duckdb) of GiBleed ────────────────────────────────────\n\n\n• omop tables: person, observation_period, visit_occurrence, visit_detail,\ncondition_occurrence, drug_exposure, procedure_occurrence, device_exposure,\nmeasurement, observation, death, note, note_nlp, specimen, fact_relationship,\nlocation, care_site, provider, payer_plan_period, cost, drug_era, dose_era,\ncondition_era, metadata, cdm_source, concept, vocabulary, domain,\nconcept_class, concept_relationship, relationship, concept_synonym,\nconcept_ancestor, source_to_concept_map, drug_strength\n\n\n• cohort tables: -\n\n\n• achilles tables: -\n\n\n• other tables: -"
  },
  {
    "objectID": "TreatmentPatterns/index.html#patterns-of-treatments-before-during-and-after-viral-sinusitis",
    "href": "TreatmentPatterns/index.html#patterns-of-treatments-before-during-and-after-viral-sinusitis",
    "title": "TreatmentPatterns",
    "section": "Patterns of treatments before, during, and after Viral Sinusitis",
    "text": "Patterns of treatments before, during, and after Viral Sinusitis\n\n\nIndication Windows:\n\nTwo weeks prior Viral Sinusitis\nDuring Viral Sinusitis\nTwo weeks after Viral Sinusitis\n\n\nTreatments of interest:\n\nAcetaminophen\nAmoxicillin\nAspirin\nClavunate\nDoxylamine\nPenicillin V"
  },
  {
    "objectID": "TreatmentPatterns/index.html#patterns-of-treatments-before-during-and-after-viral-sinusitis-1",
    "href": "TreatmentPatterns/index.html#patterns-of-treatments-before-during-and-after-viral-sinusitis-1",
    "title": "TreatmentPatterns",
    "section": "Patterns of treatments before, during, and after Viral Sinusitis",
    "text": "Patterns of treatments before, during, and after Viral Sinusitis"
  },
  {
    "objectID": "TreatmentPatterns/index.html#interfacing-with-the-cdm",
    "href": "TreatmentPatterns/index.html#interfacing-with-the-cdm",
    "title": "TreatmentPatterns",
    "section": "Interfacing with the CDM",
    "text": "Interfacing with the CDM\n\n\ncohorts: Table dictating which cohort is of what type.\n\ncohortTableName: Name of the cohort table(s) to use.\n\nCDM interface: Either through CDMConnector or DatabaseConnector"
  },
  {
    "objectID": "TreatmentPatterns/index.html#interfacing-with-the-cdm-1",
    "href": "TreatmentPatterns/index.html#interfacing-with-the-cdm-1",
    "title": "TreatmentPatterns",
    "section": "Interfacing with the CDM",
    "text": "Interfacing with the CDM\nCDMConnector\n\n\ncdm: CDM-reference to use.\n\nDatabaseConnector\n\n\nconnectionDetails: ConnectionDetails object.\n\ncdmSchema: Schema where the CDM resides.\n\nresultSchema: Schema where the cohort table resides.\n\ntempEmulationSchema: Temp schema."
  },
  {
    "objectID": "TreatmentPatterns/index.html#analysis-information",
    "href": "TreatmentPatterns/index.html#analysis-information",
    "title": "TreatmentPatterns",
    "section": "Analysis Information",
    "text": "Analysis Information\n\n\nanalysisId: ID to identify the analysis.\n\ndescription: Description of the analysis."
  },
  {
    "objectID": "TreatmentPatterns/index.html#windowing",
    "href": "TreatmentPatterns/index.html#windowing",
    "title": "TreatmentPatterns",
    "section": "Windowing",
    "text": "Windowing\n\n\nstartAnchor: Anchor on Start or End date.\n\nwindowStart: Offset of startAnchor.\n\nendAnchor: Anchor on Start or End date.\n\nwindowEnd: Offset of endAnchor."
  },
  {
    "objectID": "TreatmentPatterns/index.html#pathway-construction",
    "href": "TreatmentPatterns/index.html#pathway-construction",
    "title": "TreatmentPatterns",
    "section": "Pathway construction",
    "text": "Pathway construction\n\n\nminEraDuration: Minimum duration of events.\n\ncombinationWindow: Minimum overlap between events to be considered a combination event.\n\nminPostCombinationDuration: Minimum duration of (combination) events to keep after combining events.\n\nconcatTargets: Should multiple targets be concatenated, or treated as separate events?\n\nfilterTreatments: Which events should we consider?"
  },
  {
    "objectID": "TreatmentPatterns/index.html#generating-cohorts",
    "href": "TreatmentPatterns/index.html#generating-cohorts",
    "title": "TreatmentPatterns",
    "section": "Generating Cohorts",
    "text": "Generating Cohorts\n\ncohortSet &lt;- readCohortSet(path = \"./cohorts\")\n\ncdm &lt;- generateCohortSet(cdm = cdm, cohortSet = cohortSet, name = \"cohort_table\")"
  },
  {
    "objectID": "TreatmentPatterns/index.html#cohort-counts",
    "href": "TreatmentPatterns/index.html#cohort-counts",
    "title": "TreatmentPatterns",
    "section": "Cohort Counts",
    "text": "Cohort Counts\n\ncohortCount(cdm$cohort_table)\n\n# A tibble: 7 × 3\n  cohort_definition_id number_records number_subjects\n                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;\n1                    1           2679            2679\n2                    2           2130            2130\n3                    3           1927            1927\n4                    4           2021            2021\n5                    5           1393            1393\n6                    6           1732            1732\n7                    7          17072            2686"
  },
  {
    "objectID": "TreatmentPatterns/index.html#viral-sinusitis-attrition",
    "href": "TreatmentPatterns/index.html#viral-sinusitis-attrition",
    "title": "TreatmentPatterns",
    "section": "Viral Sinusitis Attrition",
    "text": "Viral Sinusitis Attrition\n\nattrition(cdm$cohort_table) |&gt;\n  # ID 7 == Viral Sinusitis\n  filter(cohort_definition_id == 7)\n\n# A tibble: 2 × 7\n  cohort_definition_id number_records number_subjects reason_id reason          \n                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           \n1                    7          17072            2686         1 Qualifying init…\n2                    7          17072            2686         2 Cohort records …\n# ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;"
  },
  {
    "objectID": "TreatmentPatterns/index.html#target-and-events",
    "href": "TreatmentPatterns/index.html#target-and-events",
    "title": "TreatmentPatterns",
    "section": "Target and Events",
    "text": "Target and Events\n\ncohorts &lt;- cohortSet |&gt;\n  select(cohortId = \"cohort_definition_id\", cohortName = \"cohort_name\") |&gt;\n  mutate(type = c(rep(\"event\", 6), \"target\"))\n\ncohorts\n\n# A tibble: 7 × 3\n  cohortId cohortName      type  \n     &lt;int&gt; &lt;chr&gt;           &lt;chr&gt; \n1        1 acetaminophen   event \n2        2 amoxicillin     event \n3        3 aspirin         event \n4        4 clavunate       event \n5        5 doxylamine      event \n6        6 penicillin_v    event \n7        7 viral_sinusitis target"
  },
  {
    "objectID": "TreatmentPatterns/index.html#two-weeks-prior-to-viral-sinusitis",
    "href": "TreatmentPatterns/index.html#two-weeks-prior-to-viral-sinusitis",
    "title": "TreatmentPatterns",
    "section": "Two Weeks Prior to Viral Sinusitis",
    "text": "Two Weeks Prior to Viral Sinusitis\n\nweekPrior &lt;- computePathways(\n  cohorts = cohorts,\n  cohortTableName = \"cohort_table\",\n  cdm = cdm,\n\n  analysisId = 1,\n  description = \"Two weeks prior\",\n\n  startAnchor = \"startDate\",\n  windowStart = -14,\n  endAnchor = \"startDate\",\n  windowEnd = -1,\n\n  minEraDuration = 5,\n  combinationWindow = 7,\n  minPostCombinationDuration = 5,\n  concatTargets = FALSE,\n  filterTreatments = \"All\"\n)\n\n-- Qualifying records for cohort definitions: 1, 2, 3, 4, 5, 6, 7\n    Records: 28954\n    Subjects: 2694\n\n\n-- Removing records &lt; minEraDuration (5)\n    Records: 28868\n    Subjects: 2686\n\n\n&gt;&gt; Starting on target: 7 (viral_sinusitis)\n\n\n-- Removing events outside window (startDate: -14 | startDate: -1)\n    Records: 50\n    Subjects: 48\n\n\n-- splitEventCohorts\n    Records: 50\n    Subjects: 48\n\n\n-- Collapsing eras, eraCollapse (30)\n    Records: 50\n    Subjects: 48\n\n\n-- Iteration 1: minPostCombinationDuration (5), combinatinoWindow (7)\n    Records: 49\n    Subjects: 48\n\n\n-- After Combination\n    Records: 49\n    Subjects: 48\n\n\n-- filterTreatments (All)\n    Records: 49\n    Subjects: 48\n\n\n-- Max path length (5)\n    Records: 49\n    Subjects: 48\n\n\n-- treatment construction done\n    Records: 49\n    Subjects: 48"
  },
  {
    "objectID": "TreatmentPatterns/index.html#during-viral-sinusitis",
    "href": "TreatmentPatterns/index.html#during-viral-sinusitis",
    "title": "TreatmentPatterns",
    "section": "During Viral Sinusitis",
    "text": "During Viral Sinusitis\n\nduring &lt;- computePathways(\n  cohorts = cohorts,\n  cohortTableName = \"cohort_table\",\n  cdm = cdm,\n\n  analysisId = 2,\n  description = \"During\",\n\n  startAnchor = \"startDate\",\n  windowStart = 0,\n  endAnchor = \"endDate\",\n  windowEnd = 0,\n\n  minEraDuration = 5,\n  combinationWindow = 7,\n  minPostCombinationDuration = 5,\n  concatTargets = FALSE,\n  filterTreatments = \"All\"\n)\n\n-- Qualifying records for cohort definitions: 1, 2, 3, 4, 5, 6, 7\n    Records: 28954\n    Subjects: 2694\n\n\n-- Removing records &lt; minEraDuration (5)\n    Records: 28868\n    Subjects: 2686\n\n\n&gt;&gt; Starting on target: 7 (viral_sinusitis)\n\n\n-- Removing events outside window (startDate: 0 | endDate: 0)\n    Records: 3506\n    Subjects: 1801\n\n\n-- splitEventCohorts\n    Records: 3506\n    Subjects: 1801\n\n\n-- Collapsing eras, eraCollapse (30)\n    Records: 3506\n    Subjects: 1801\n\n\n-- Iteration 1: minPostCombinationDuration (5), combinatinoWindow (7)\n    Records: 1817\n    Subjects: 1801\n\n\n-- Iteration 2: minPostCombinationDuration (5), combinatinoWindow (7)\n    Records: 1816\n    Subjects: 1801\n\n\n-- After Combination\n    Records: 1816\n    Subjects: 1801\n\n\n-- filterTreatments (All)\n    Records: 1816\n    Subjects: 1801\n\n\n-- Max path length (5)\n    Records: 1816\n    Subjects: 1801\n\n\n-- treatment construction done\n    Records: 1816\n    Subjects: 1801"
  },
  {
    "objectID": "TreatmentPatterns/index.html#two-weeks-after-viral-sinusitis",
    "href": "TreatmentPatterns/index.html#two-weeks-after-viral-sinusitis",
    "title": "TreatmentPatterns",
    "section": "Two Weeks After Viral Sinusitis",
    "text": "Two Weeks After Viral Sinusitis\n\nafter &lt;- computePathways(\n  cohorts = cohorts,\n  cohortTableName = \"cohort_table\",\n  cdm = cdm,\n\n  analysisId = 3,\n  description = \"Two weeks after\",\n\n  startAnchor = \"endDate\",\n  windowStart = 0,\n  endAnchor = \"endDate\",\n  windowEnd = 14,\n\n  minEraDuration = 5,\n  combinationWindow = 7,\n  minPostCombinationDuration = 5,\n  concatTargets = FALSE,\n  filterTreatments = \"All\"\n)\n\n-- Qualifying records for cohort definitions: 1, 2, 3, 4, 5, 6, 7\n    Records: 28954\n    Subjects: 2694\n\n\n-- Removing records &lt; minEraDuration (5)\n    Records: 28868\n    Subjects: 2686\n\n\n&gt;&gt; Starting on target: 7 (viral_sinusitis)\n\n\n-- Removing events outside window (endDate: 0 | endDate: 14)\n    Records: 34\n    Subjects: 33\n\n\n-- splitEventCohorts\n    Records: 34\n    Subjects: 33\n\n\n-- Collapsing eras, eraCollapse (30)\n    Records: 34\n    Subjects: 33\n\n\n-- Iteration 1: minPostCombinationDuration (5), combinatinoWindow (7)\n    Records: 33\n    Subjects: 33\n\n\n-- After Combination\n    Records: 33\n    Subjects: 33\n\n\n-- filterTreatments (All)\n    Records: 33\n    Subjects: 33\n\n\n-- Max path length (5)\n    Records: 33\n    Subjects: 33\n\n\n-- treatment construction done\n    Records: 33\n    Subjects: 33"
  },
  {
    "objectID": "TreatmentPatterns/index.html#exporting",
    "href": "TreatmentPatterns/index.html#exporting",
    "title": "TreatmentPatterns",
    "section": "Exporting",
    "text": "Exporting\n\npriorRes &lt;- export(weekPrior, minCellCount = 5, censorType = \"remove\")\nduringRes &lt;- export(during, minCellCount = 5, censorType = \"remove\")\nafterRes &lt;- export(after, minCellCount = 5, censorType = \"remove\")"
  },
  {
    "objectID": "TreatmentPatterns/index.html#counts",
    "href": "TreatmentPatterns/index.html#counts",
    "title": "TreatmentPatterns",
    "section": "Counts",
    "text": "Counts\n\ndata.frame(\n  label = c(\"Week Prior\", \"During\", \"Week Post\"),\n  count = c(\n    sum(priorRes$treatment_pathways$freq),\n    sum(duringRes$treatment_pathways$freq),\n    sum(afterRes$treatment_pathways$freq)\n  )\n)\n\n       label count\n1 Week Prior    49\n2     During  1814\n3  Week Post    33"
  },
  {
    "objectID": "TreatmentPatterns/index.html#two-weeks-prior",
    "href": "TreatmentPatterns/index.html#two-weeks-prior",
    "title": "TreatmentPatterns",
    "section": "Two weeks Prior",
    "text": "Two weeks Prior\n\n\n\n\n\n\n\n\n\n\n\nLegend"
  },
  {
    "objectID": "TreatmentPatterns/index.html#during",
    "href": "TreatmentPatterns/index.html#during",
    "title": "TreatmentPatterns",
    "section": "During",
    "text": "During\n\n\n\n\n\n\n\n\n\n\n\nLegend"
  },
  {
    "objectID": "TreatmentPatterns/index.html#two-weeks-after",
    "href": "TreatmentPatterns/index.html#two-weeks-after",
    "title": "TreatmentPatterns",
    "section": "Two weeks after",
    "text": "Two weeks after\n\n\n\n\n\n\n\n\n\n\n\nLegend"
  },
  {
    "objectID": "TreatmentPatterns/index.html#event-time",
    "href": "TreatmentPatterns/index.html#event-time",
    "title": "TreatmentPatterns",
    "section": "Event time",
    "text": "Event time\n\nduringRes$plotEventDuration()"
  },
  {
    "objectID": "TreatmentPatterns/index.html#conclusion",
    "href": "TreatmentPatterns/index.html#conclusion",
    "title": "TreatmentPatterns",
    "section": "Conclusion",
    "text": "Conclusion\n\nSignificantly less use of treatments of interest two weeks before and after Viral Sinusitis.\nPattern of use of treatments in period before and after Viral Sinusitis seems similar.\nTreatment during Viral Sinusitis is dominated by Amoxicillin + Clavunate (7 day overlap) with 93% with Clavunate as monotherapy following up with 5.9%. Both do not occur outside the Viral Sinusitis window.\nClavunate and Acetaminophen were used as a second-line treatment, but in a negotiable amount of subjects."
  }
]